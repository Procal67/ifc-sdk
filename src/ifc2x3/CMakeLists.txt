PROJECT(ifc2x3)

FILE (GLOB PROJECT_SOURCES *.cpp)
LIST (REMOVE_ITEM PROJECT_SOURCES "${CMAKE_CURRENT_SOURCE_DIR}/precompiled.cpp")

FILE (GLOB PROJECT_INCLUDES ../../include/ifc2x3/*.h )

if(ENABLE_MSVC_PRECOMPILED_HEADER)
    ADD_MSVC_PRECOMPILED_HEADER("precompiled.h" "precompiled.cpp" PROJECT_SOURCES) 
    add_definitions(-DENABLE_MSVC_PRECOMPILED_HEADER)
endif()

ADD_LIBRARY(ifc2x3 SHARED ${PROJECT_SOURCES} ${PROJECT_INCLUDES})

TARGET_LINK_LIBRARIES(ifc2x3 Step )

IF(MSVC)
  SET_TARGET_PROPERTIES(ifc2x3 PROPERTIES LINK_FLAGS "/INCREMENTAL:NO")
ENDIF(MSVC)

SET_TARGET_PROPERTIES(ifc2x3 PROPERTIES PROJECT_LABEL "Library ifc2x3" VERSION ${ifc2x3_sdk_VERSION_FULL} SOVERSION ${ifc2x3_sdk_VERSION})

INSTALL(FILES ${PROJECT_INCLUDES} DESTINATION include/ifc2x3)

INSTALL(TARGETS ifc2x3
        RUNTIME DESTINATION bin
        LIBRARY DESTINATION lib${LIB_POSTFIX}
        ARCHIVE DESTINATION lib${LIB_POSTFIX}
)

